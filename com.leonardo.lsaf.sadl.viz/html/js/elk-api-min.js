!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ELK=e()}(function(){return function o(n,i,s){function a(r,e){if(!i[r]){if(!n[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(u)return u(r,!0);throw(e=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",e}t=i[r]={exports:{}},n[r][0].call(t.exports,function(e){return a(n[r][1][e]||e)},t,t.exports,o,n,i,s)}return i[r].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e};function n(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function s(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultLayoutOptions,t=void 0===t?{}:t,o=e.algorithms,o=void 0===o?["layered","stress","mrtree","radial","force","disco","sporeOverlap","sporeCompaction","rectpacking"]:o,n=e.workerFactory,e=e.workerUrl;if(i(this,s),this.defaultLayoutOptions=t,this.initialized=!1,void 0===e&&void 0===n)throw new Error("Cannot construct an ELK without both 'workerUrl' and 'workerFactory'.");t=(void 0!==e&&void 0===n?function(e){return new Worker(e)}:n)(e);if("function"!=typeof t.postMessage)throw new TypeError("Created worker does not provide the required 'postMessage' function.");this.worker=new a(t),this.worker.postMessage({cmd:"register",algorithms:o}).then(function(e){return r.initialized=!0}).catch(console.err)}o(s,[{key:"layout",value:function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=r.layoutOptions,t=void 0===t?this.defaultLayoutOptions:t,o=r.logging,r=r.measureExecutionTime;return e?this.worker.postMessage({cmd:"layout",graph:e,layoutOptions:t,options:{logging:void 0!==o&&o,measureExecutionTime:void 0!==r&&r}}):Promise.reject(new Error("Missing mandatory parameter 'graph'."))}},{key:"knownLayoutAlgorithms",value:function(){return this.worker.postMessage({cmd:"algorithms"})}},{key:"knownLayoutOptions",value:function(){return this.worker.postMessage({cmd:"options"})}},{key:"knownLayoutCategories",value:function(){return this.worker.postMessage({cmd:"categories"})}},{key:"terminateWorker",value:function(){this.worker.terminate()}}]),t.default=s;o(u,[{key:"postMessage",value:function(e){var r=this.id||0,n=(this.id=r+1,e.id=r,this);return new Promise(function(t,o){n.resolvers[r]=function(e,r){e?(n.convertGwtStyleError(e),o(e)):t(r)},n.worker.postMessage(e)})}},{key:"receive",value:function(e,r){var r=r.data,t=e.resolvers[r.id];t&&(delete e.resolvers[r.id],r.error?t(r.error):t(null,r.data))}},{key:"terminate",value:function(){this.worker.terminate&&this.worker.terminate()}},{key:"convertGwtStyleError",value:function(e){var r;e&&(r=e.__java$exception)&&(r.cause&&r.cause.backingJsObject&&(e.cause=r.cause.backingJsObject,this.convertGwtStyleError(e.cause)),delete e.__java$exception)}}]);var a=u;function u(e){var r=this;if(i(this,u),void 0===e)throw new Error("Missing mandatory parameter 'worker'.");this.resolvers={},this.worker=e,this.worker.onmessage=function(e){setTimeout(function(){r.receive(r,e)},0)}}},{}],2:[function(e,r,t){"use strict";e=e("./elk-api.js").default;Object.defineProperty(r.exports,"__esModule",{value:!0}),(r.exports=e).default=e},{"./elk-api.js":1}]},{},[2])(2)});
